üìò Regras de Neg√≥cio: Guia Noivas Piracicaba1. Defini√ß√£o de AtoresA Noiva (Visitante): Usu√°rio n√£o logado. Busca facilidade e resposta r√°pida.Fornecedor "Sombra" (Shadow): Perfil cadastrado pela administra√ß√£o (n√≥s) com dados p√∫blicos. Ainda n√£o reivindicado.Fornecedor Gratuito (Free): Perfil reivindicado, mas sem pagamento.Fornecedor Vitrine (Premium): Perfil pagante (Assinatura Ativa).2. A Matriz de Planos e Permiss√µesA l√≥gica √© baseada na Fric√ß√£o Progressiva. O Gratuito funciona at√© viciar, depois trava.Funcionalidadeüåë Gratuito (Ativo)üßü Gratuito (Esgotado/Zumbi)üåï Vitrine (Pago)Status do Lead< 3 envios>= 3 enviosIlimitadoBot√£o WhatsApp‚õî Oculto‚õî Oculto‚úÖ Direto (API)Formul√°rio de E-mail‚úÖ Vis√≠vel‚õî Removido‚õî Oculto (Desnecess√°rio)Exibi√ß√£o de TelefoneTexto Puro (Cinza)Texto Puro (Cinza)Link Clic√°velExibi√ß√£o de Site/Insta‚õî Bloqueado‚õî Bloqueado‚úÖ Liberado (Link)PosicionamentoFim da listaFim da listaTopo / Aleat√≥rioEspa√ßo Publicit√°rioLimpoExibe Concorrentes ‚ò†Ô∏èLimpoNotifica√ß√£o de LeadE-mail (Manual)NenhumaWhatsApp (Imediato)3. Detalhamento do Ciclo de Vida do FornecedorFase 1: O Perfil Gratuito Ativo (A Isca)Condi√ß√£o: PlanLevel == Free E LeadCount < 3.Experi√™ncia da Noiva: Ela v√™ o perfil, mas n√£o v√™ bot√£o de WhatsApp. Ela v√™ um bot√£o "Solicitar Or√ßamento". Ao clicar, abre um modal, ela preenche os dados e envia.A√ß√£o do Sistema:Salva o lead no banco.Incrementa LeadCount.Envia e-mail para o fornecedor com os dados da noiva.Rodap√© do E-mail: "Este √© seu lead gratuito n¬∫ X de 3. Assine o Vitrine para liberar WhatsApp direto."Fase 2: O Perfil Zumbi (A Press√£o)Condi√ß√£o: PlanLevel == Free E LeadCount >= 3.Gatilho: Assim que o 3¬∫ lead √© enviado, o status muda automaticamente.Experi√™ncia da Noiva:O bot√£o "Solicitar Or√ßamento" desaparece.O telefone aparece apenas como texto (ex: 19 99999-9999) sem link tel: ou wa.me. Ela n√£o consegue clicar. Precisa copiar e colar (Alta Fric√ß√£o).Inje√ß√£o de Concorrente: Logo abaixo dos dados, aparece um bloco: "Fornecedores similares com atendimento imediato:" (Exibe 3 cards de clientes Vitrine aleat√≥rios da mesma categoria).A√ß√£o do Sistema:Dispara o E-mail de Ultimato para o fornecedor: "Seu limite acabou. Seu perfil parou de receber leads autom√°ticos. Assine agora para reativar."Fase 3: O Perfil Vitrine (A Gl√≥ria)Condi√ß√£o: PlanLevel == Vitrine (Pagamento Confirmado).Experi√™ncia da Noiva: Bot√£o verde grande "Chamar no WhatsApp". Clique √∫nico. Abre o app.A√ß√£o do Sistema:Registra evento de convers√£o (Pixel/CAPI).N√£o interfere na conversa.4. Regras T√©cnicas de API (Backend C#)Para garantir a seguran√ßa dos dados e evitar "hacks" de frontend, a API deve retornar dados sanitizados.DTO de Retorno P√∫blico (VendorPublicDto)O Backend deve processar a l√≥gica antes de entregar o JSON.Campo WhatsAppUrl:Se Vitrine: Retorna https://wa.me/55...?text=...Se Free (Qualquer estado): Retorna NULL.Campo PhoneDisplay:Sempre retorna o n√∫mero formatado (String). Nota: Isso garante a legalidade (dado p√∫blico), mas sem a conveni√™ncia do link.Campo ShowContactForm (Booleano):Se Vitrine: FALSE.Se Free E LeadCount < 3: TRUE.Se Free E LeadCount >= 3: FALSE.Campo AdInjection (Lista):Se Free E LeadCount >= 3: Retorna uma lista com 3 IDs/Nomes de fornecedores Vitrine da mesma categoria.Caso contr√°rio: Retorna Lista Vazia.5. Regras de Ordena√ß√£o (SEO Interno)A query do banco deve respeitar estritamente esta hierarquia para garantir que quem paga tenha visibilidade.Query Padr√£o (Listagem por Categoria):Crit√©rio 1: PlanLevel (Descendente) -> Vitrine (1) aparece antes de Free (0).Crit√©rio 2: RandomSeed (Guid) -> Para rotacionar os Vitrines entre si, para que o mesmo n√£o fique sempre em 1¬∫.Crit√©rio 3: Os perfis "Zumbis" (Free esgotado) devem aparecer no final absoluto da lista, pois s√£o "becos sem sa√≠da" para a noiva.6. Fluxo de E-mails Transacionais (Automa√ß√£o)Voc√™ precisar√° configurar 3 templates no seu provedor de e-mail (SendGrid/Resend/SMTP):Template A (Novo Lead - Free):Assunto: Nova solicita√ß√£o de or√ßamento: [Nome da Noiva]Conte√∫do: Dados completos da noiva + Contador de leads restantes.Template B (Ultimato - Free Esgotado):Assunto: üö® Seus leads gratuitos acabaram.Conte√∫do: Aviso de bloqueio do formul√°rio + Link de Checkout do Plano Vitrine.Template C (Boas Vindas - Vitrine):Assunto: Seu perfil agora √© Premium! üèÜConte√∫do: Confirma√ß√£o de pagamento + Dicas para melhorar o perfil (fotos ilimitadas).7. Blindagem Jur√≠dica (Compliance)Dados P√∫blicos: Mantemos Nome da Empresa, Endere√ßo e Telefone vis√≠veis em texto puro em todos os cen√°rios. Isso nos classifica como Diret√≥rio Comercial (Legal).Dados Privados (Leads): Nunca vendemos o dado da noiva. N√≥s o entregamos ao fornecedor como parte da presta√ß√£o de servi√ßo (intermedia√ß√£o), seja via e-mail (Free) ou conex√£o direta (Vitrine).Termos de Uso: Ao preencher o formul√°rio, a noiva deve marcar um checkbox: "Concordo em compartilhar meus dados com este fornecedor espec√≠fico."