<div class="dashboard-header">
  <h1>Dashboard</h1>
  <p>Visão geral do seu perfil de fornecedor</p>
</div>

<div *ngIf="loading" class="loading-container">
  <div class="spinner"></div>
  <p>Carregando estatísticas...</p>
</div>

<div *ngIf="error" class="error-alert">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <circle cx="12" cy="12" r="10"></circle>
    <line x1="12" y1="8" x2="12" y2="12"></line>
    <line x1="12" y1="16" x2="12.01" y2="16"></line>
  </svg>
  <span>{{ error }}</span>
</div>

<div *ngIf="stats && !loading" class="dashboard-content">
  <!-- Cards de Estatísticas -->
  <div class="stats-grid">
    <div class="stat-card stat-primary">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
      </div>
      <div class="stat-info">
        <p class="stat-label">Visualizações</p>
        <h3 class="stat-value">{{ stats.totalVisualizacoes }}</h3>
      </div>
    </div>

    <div class="stat-card stat-success">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
      </div>
      <div class="stat-info">
        <p class="stat-label">Testemunhos</p>
        <h3 class="stat-value">{{ stats.testemunhos }}</h3>
      </div>
    </div>

    <div class="stat-card stat-warning">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
      </div>
      <div class="stat-info">
        <p class="stat-label">Imagens</p>
        <h3 class="stat-value">{{ stats.imagens }}</h3>
      </div>
    </div>

    <div class="stat-card stat-info">
      <div class="stat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
        </svg>
      </div>
      <div class="stat-info">
        <p class="stat-label">Avaliação</p>
        <h3 class="stat-value">{{ stats.rating || '–' }}</h3>
      </div>
    </div>
  </div>

  <!-- Visualizações Recentes -->
  <div class="card" *ngIf="stats.ultimasVisualizacoes && stats.ultimasVisualizacoes.length">
    <div class="card-header">
      <h2>Visualizações Recentes</h2>
      <span class="card-subtitle">Últimos 7 dias</span>
    </div>
    <div class="views-chart">
      <div 
        *ngFor="let view of stats.ultimasVisualizacoes" 
        class="view-bar-container"
      >
        <div class="view-bar" [style.height]="(view.quantidade * 100 / getMaxViews()) + '%'">
          <div class="view-value">{{ view.quantidade }}</div>
        </div>
        <div class="view-label">{{ view.data | date:'dd/MM' }}</div>
      </div>
    </div>
  </div>

  <!-- Links Rápidos -->
  <div class="section-header">
    <h2>Ações Rápidas</h2>
    <p>Acesse rapidamente as principais funcionalidades</p>
  </div>
  
  <div class="quick-links">
    <a routerLink="/painel/perfil" class="quick-link-card">
      <div class="quick-link-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </div>
      <div class="quick-link-content">
        <h3>Editar Perfil</h3>
        <p>Atualizar informações do fornecedor</p>
      </div>
      <svg class="quick-link-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12 5 19 12 12 19"></polyline>
      </svg>
    </a>

    <a routerLink="/painel/imagens" class="quick-link-card">
      <div class="quick-link-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
      </div>
      <div class="quick-link-content">
        <h3>Gerenciar Imagens</h3>
        <p>Upload e organização de fotos</p>
      </div>
      <svg class="quick-link-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12 5 19 12 12 19"></polyline>
      </svg>
    </a>

    <a routerLink="/painel/testemunhos" class="quick-link-card">
      <div class="quick-link-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
      </div>
      <div class="quick-link-content">
        <h3>Testemunhos</h3>
        <p>Cadastrar depoimentos de clientes</p>
      </div>
      <svg class="quick-link-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12 5 19 12 12 19"></polyline>
      </svg>
    </a>
  </div>
</div>
